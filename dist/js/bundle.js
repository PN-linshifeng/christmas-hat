!function(t){function e(n){if(a[n])return a[n].exports;var i=a[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var a={};e.m=t,e.c=a,e.d=function(t,a,n){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=0)}([function(t,e,a){t.exports=a(1)},function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(){y.clearRect(0,0,750,750),y.save(),y.fillStyle="#fff",y.fillRect(40,40,670,670),y.restore()}function s(){i();for(var t=0;t<p.length;t++)p[t].draw(y);x>=0&&function(){var t=p[x];y.save(),y.translate(t.translate.x,t.translate.y),y.rotate(t.rotate*Math.PI/180),y.beginPath(),y.arc(t.dx,t.dy,15,0,2*Math.PI,!1),y.fillStyle="#ccc",y.fill(),y.beginPath(),y.moveTo(t.dx-15-10,t.dy),y.lineTo(t.dx-15-10,t.dy-15-10),y.lineTo(t.dx,t.dy-15-10),y.lineWidth=3,y.strokeStyle="#ff0000",y.stroke(),y.beginPath(),y.arc(t.dx+t.dw,t.dy,25,2*Math.PI,1.5*Math.PI,!0),y.strokeStyle="#ff0000",y.lineWidth=3,y.stroke(),y.beginPath(),y.arc(t.dx+t.dw,t.dy,15,0,2*Math.PI,!1),y.fillStyle="#ccc",y.fill(),y.beginPath(),y.arc(t.dx+t.dw,t.dy+t.dh,15,0,2*Math.PI,!1),y.fillStyle="#ccc",y.fill(),y.beginPath(),y.moveTo(t.dx+t.dw+15+10,t.dy+t.dh),y.lineTo(t.dx+t.dw+15+10,t.dy+t.dh+15+10),y.lineTo(t.dx+t.dw,t.dy+t.dh+15+10),y.lineWidth=3,y.strokeStyle="#ff0000",y.stroke(),y.beginPath(),y.arc(t.dx,t.dy+t.dh,15,0,2*Math.PI,!1),y.fillStyle="#ccc",y.fill(),y.beginPath(),y.arc(t.dx,t.dy+t.dh,25,.5*Math.PI,Math.PI,!1),y.strokeStyle="#ff0000",y.lineWidth=3,y.stroke(),y.beginPath(),y.moveTo(t.dx,t.dy),y.lineTo(t.dx+t.dw,t.dy),y.lineTo(t.dx+t.dw,t.dy+t.dh),y.lineTo(t.dx,t.dy+t.dh),y.lineTo(t.dx,t.dy),y.lineWidth=1,y.strokeStyle="#ccc",y.stroke(),y.closePath(),y.beginPath(),y.arc(0,0,10,0,2*Math.PI,!1),y.fillStyle="#ccc",y.fill(),y.closePath(),y.restore()}()}var h=n(a(2));a(3);var d=n(a(4));var r,o=document.querySelector(".hat-box"),l=document.getElementById("createImg"),c=document.getElementById("canvasImg"),u=document.getElementById("imgFile"),f=document.getElementById("selectHead"),g=document.getElementById("canvas"),y=g.getContext("2d");i();var p=[],x=undefined,v=750/window.screen.width,w=!1,P=undefined,m=0,b=new Image;b.src=d["default"],l.addEventListener("click",function(){!function(){document.querySelector("#createHeadImg").style.display="block",r||((r=document.createElement("canvas")).width=750,r.height=750,r.style.width="100%");var t=r.getContext("2d");t.clearRect(0,0,750,750),t.fillStyle="#fff",t.fillRect(0,0,750,750);for(var e=0;e<p.length;e++)p[e].build(t);var a=r.toDataURL("image/png");c.src=a}()},!1),f.addEventListener("click",function(t){var e=document.createEvent("MouseEvents");e.initEvent("click",!0,!0),u.dispatchEvent(e)},!1),o.addEventListener("click",function(t){if("IMG"===t.target.tagName){p.pop();var e=new Image;e.onload=function(){p.push(new h["default"]({name:"hat",translate:{x:50,y:50},imgObj:e,full:!1})),s()},e.src=t.target.src}},!1),document.querySelector(".close").addEventListener("click",function(){document.querySelector("#createHeadImg").style.display="none"},!1),u.addEventListener("change",function(){u.style.display="none";var t=function(t){return navigator.userAgent.indexOf("MSIE")>=1?t.value:(navigator.userAgent.indexOf("Firefox"),window.URL.createObjectURL(t.files.item(0)))}(this),e=new Image;e.src=t,e.onload=function(){switch(p.length){case 0:p.push(new h["default"]({imgObj:e,name:"header"})),p.push(new h["default"]({name:"hat",imgObj:b,full:!1,translate:{x:50,y:50}}));break;case 1:p.unshift(new h["default"]({imgObj:e,name:"header"}));break;default:p.shift(),p.unshift(new h["default"]({imgObj:e,name:"header"}))}s()}},!1);var I=0,M=0,O=0,j=0,E=0,k=0,S=0,X=0,T=0,L=0,Y=0,R=0,_=0,q=!1;g.addEventListener("touchstart",function(t){if(t.preventDefault(),w)var e=function(t,e){var a=p[x];return y.save(),y.translate(a.translate.x,a.translate.y),y.rotate(a.rotate*Math.PI/180),y.beginPath(),y.arc(a.dx,a.dy,40,0,2*Math.PI,!1),y.closePath(),y.isPointInPath(t*v,e*v)?(m=1,y.restore(),!0):(y.beginPath(),y.arc(a.dx+a.dw,a.dy,40,0,2*Math.PI,!1),y.closePath(),y.isPointInPath(t*v,e*v)?(m=2,y.restore(),!0):(y.beginPath(),y.arc(a.dx+a.dw,a.dy+a.dh,40,0,2*Math.PI,!1),y.closePath(),y.isPointInPath(t*v,e*v)?(m=3,y.restore(),!0):(y.beginPath(),y.arc(a.dx,a.dy+a.dh,40,0,2*Math.PI,!1),y.closePath(),y.isPointInPath(t*v,e*v)?(m=4,y.restore(),!0):(m=0,y.restore(),undefined))))}(t.touches[0].pageX,t.touches[0].pageY);if(e||(function(t,e){var a=p.concat();a.reverse(),a.some(function(n,i){return y.save(),y.beginPath(),y.rect(n.translate.x+n.dx,n.translate.y+n.dy,n.dw,n.dh),y.closePath(),y.restore(),!!y.isPointInPath(t*v,e*v)&&(y.save(),y.beginPath(),y.rect(n.translate.x+n.dx+40,n.translate.y+n.dy+40,n.dw-40,n.dh-40),y.closePath(),y.restore(),y.isPointInPath(t*v,e*v)&&(x=a.length-1-i,w=!0),s(),!0)})}(t.touches[0].pageX,t.touches[0].pageY),x!==undefined)){if(1==t.touches.length){I=t.touches[0].pageX,M=t.touches[0].pageY,j=M;var a=2*(O=I)-p[x].translate.x,n=p[x].translate.y-2*j;E=180*Math.atan(n/a)/Math.PI,a>0&&n>0?E=360-E:a>0&&n<0?E=-E:a<0&&n<0?E=180-E:a<0&&n>0&&(E=180-E),k=E,Y=p[x].translate.x,R=p[x].translate.y,_=p[x].rotate,q=!0}else q=!1,I=t.touches[1].pageX>t.touches[0].pageX?t.touches[1].pageX-t.touches[0].pageX:t.touches[0].pageX-t.touches[1].pageX,M=t.touches[1].pageY-t.touches[0].pageY,O=I,j=M;S=p[x].dx,X=p[x].dy,T=p[x].dw,L=p[x].dh}},!1),g.addEventListener("touchmove",function(t){if(t.preventDefault(),x!==undefined){if(1==t.touches.length&&q){O=t.touches[0].pageX,j=t.touches[0].pageY;var e=O-I,a=j-M;if(m){var n=Math.abs(Math.sqrt(Math.pow(I-O,2)+Math.pow(M-j,2)));if(P==undefined&&n>2&&(P=1==m||3==m?"scale":"rotate"),"scale"===P&&(1!=m&&4!=m||(e=-e),p[x].dw=parseInt(T+e*v*2),p[x].dh=p[x].dw*L/T,p[x].dx=parseInt(S-e*v),p[x].dy=p[x].dx*X/S),"rotate"===P){var i=O*v-p[x].translate.x,h=p[x].translate.y-j*v;k=180*Math.atan(h/i)/Math.PI,i>0&&h>0?k=360-k:i>0&&h<0?k=-k:i<0&&h<0?k=180-k:i<0&&h>0&&(k=180-k);var d=k-E<0?360+k-E:k-E;k>0&&90!=k&&(p[x].rotate=d+_)}}else p[x].translate.x=parseInt(Y+e*v),p[x].translate.y=parseInt(R+a*v)}else{O=t.touches[1].pageX>t.touches[0].pageX?t.touches[1].pageX-t.touches[0].pageX:t.touches[0].pageX-t.touches[1].pageX,j=t.touches[1].pageY-t.touches[0].pageY;e=(I-O)*v;p[x].dw=parseInt(T-e),p[x].dh=parseInt(L*p[x].dw/T),p[x].dx=S+e/2,p[x].dy=X*p[x].dx/S}s()}},!1),g.addEventListener("touchend",function(t){P=undefined},!1),window.imgFloor=p},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){this.context=null,this.name="",this.padding=40,this.imgObj=null,this.state=0,this.full=!0,this.src=null,this.sx=0,this.sy=0,this.sw=0,this.sh=0,this.dx=0,this.dy=0,this.dw=750,this.dh=750,this.point={x:0,y:0},this.translate={x:0,y:0},this.scale={x:1,y:1},this.rotate=0,Object.assign(this,t),this.init()};n.prototype.init=function(){this.full?(this.sw=this.imgObj.width,this.sh=this.imgObj.height,this.dw=750-2*this.padding,this.dh=parseInt(this.sh*this.dw/this.imgObj.width),this.dx=-this.dw/2,this.dy=-this.dh/2,this.translate={x:-1*this.dx+this.padding,y:-1*this.dy+this.padding}):(this.sw=this.imgObj.width,this.sh=this.imgObj.height,this.dw=this.sw,this.dh=this.sh,this.dx=-this.dw/2,this.dy=-this.dh/2,this.translate={x:-1*this.dx+this.padding+this.translate.x,y:-1*this.dy+this.padding+this.translate.y})},n.prototype.draw=function(t){t.save(),t.beginPath(),t.rect(this.padding,this.padding,750-2*this.padding,750-2*this.padding),t.clip(),t.translate(this.translate.x,this.translate.y),t.rotate(this.rotate*Math.PI/180),t.drawImage(this.imgObj,this.sx,this.sy,this.sw,this.sh,this.dx,this.dy,this.dw,this.dh),t.restore()},n.prototype.build=function(t){t.save(),t.beginPath(),t.scale(750/670,750/670),t.translate(this.translate.x-this.padding,this.translate.y-this.padding),t.rotate(this.rotate*Math.PI/180),t.drawImage(this.imgObj,this.sx,this.sy,this.sw,this.sh,this.dx,this.dy,this.dw,this.dh),t.restore()},e["default"]=n,"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(a[s]=i[s])}return a},writable:!0,configurable:!0})},function(t,e){},function(t,e,a){t.exports=a.p+"images/99.png"}]);